# -*- coding: utf-8 -*-
"""Validation.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1fecg6s51Nqw0FXsSNjxl5rBLonX0BZx7
"""

import json
import pandas as pd
from pprint import pprint

with open('/content/predictions (1).jsonl','r') as f:
  files = f.readlines()

pprint(files)

predictedLabels = []
predictions = []
for i in files:
  j = json.loads(i) # converts string json to actual json
  print(j)
  classes = j['Classes']
  predictions.append(classes[0])
  predictedLabels.append(classes[0]['Name'])

print(predictions)

print(predictedLabels)

df_test = pd.read_csv('test.csv',header=None,names = ['Document'])

df_test

# adding a new prediction column
df_test['predictedLabels'] = predictedLabels

df_test

# now grabbing truth_test

colnames=['TruthLabel','Document'] 
df_truth = pd.read_csv('truth_test.csv',header = None, names = colnames)

df_truth.reset_index(drop=True)

# merge data frame to compare
mergeDf = pd.merge(df_test, df_truth, on=['Document'], how ='inner')

mergeDf

# checking
mergeDf[mergeDf.predictedLabels == mergeDf.TruthLabel].count()

mergeDf.predictedLabels == mergeDf.TruthLabel

